warning: in the working copy of 'src/screens/profileScreen.js', LF will be replaced by CRLF the next time Git touches it
[1mdiff --git a/src/screens/profileScreen.js b/src/screens/profileScreen.js[m
[1mindex cf49d23..62f4ef3 100644[m
[1m--- a/src/screens/profileScreen.js[m
[1m+++ b/src/screens/profileScreen.js[m
[36m@@ -22,7 +22,7 @@[m [mimport { userAPI, couponAPI } from '../services/apiService';[m
 const { width, height } = Dimensions.get('window');[m
 [m
 export default function ProfileScreen({ navigation }) {[m
[31m-  const { currentUser: authUser, isAdmin, userData: authUserData } = useAuth();[m
[32m+[m[32m  const { currentUser: authUser, isAdmin, userData: authUserData, signOut, isAuthenticated } = useAuth();[m
   const [activeTab, setActiveTab] = useState('uploaded');[m
   const [uploadedCoupons, setUploadedCoupons] = useState([]);[m
   const [purchasedCoupons, setPurchasedCoupons] = useState([]);[m
[36m@@ -35,21 +35,23 @@[m [mexport default function ProfileScreen({ navigation }) {[m
   const [editLoading, setEditLoading] = useState(false);[m
 [m
   useEffect(() => {[m
[31m-    if (authUserData) {[m
[31m-      setUserData(authUserData);[m
[31m-      setCurrentUser(authUser);[m
[31m-    } else {[m
[31m-      checkCurrentUser();[m
[31m-      loadUserData();[m
[32m+[m[32m    if (isAuthenticated) {[m
[32m+[m[32m      if (authUserData) {[m
[32m+[m[32m        setUserData(authUserData);[m
[32m+[m[32m        setCurrentUser(authUser);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        checkCurrentUser();[m
[32m+[m[32m        loadUserData();[m
[32m+[m[32m      }[m
[32m+[m[32m      loadPurchasedCoupons();[m
     }[m
[31m-    loadPurchasedCoupons();[m
[31m-  }, [authUserData, authUser]);[m
[32m+[m[32m  }, [authUserData, authUser, isAuthenticated]);[m
 [m
   useEffect(() => {[m
[31m-    if (activeTab === 'uploaded') {[m
[32m+[m[32m    if (activeTab === 'uploaded' && isAuthenticated) {[m
       loadUploadedCoupons();[m
     }[m
[31m-  }, [activeTab]);[m
[32m+[m[32m  }, [activeTab, isAuthenticated]);[m
 [m
   const checkCurrentUser = () => {[m
     const user = auth().currentUser;[m
[36m@@ -232,9 +234,19 @@[m [mexport default function ProfileScreen({ navigation }) {[m
         style: 'destructive',[m
         onPress: async () => {[m
           try {[m
[31m-            await auth().signOut();[m
[32m+[m[32m            await signOut();[m
[32m+[m[32m            Alert.alert('Success', 'You have been logged out successfully!', [[m
[32m+[m[32m              {[m
[32m+[m[32m                text: 'OK',[m
[32m+[m[32m                onPress: () => navigation.reset({[m
[32m+[m[32m                  index: 0,[m
[32m+[m[32m                  routes: [{ name: 'Home' }],[m
[32m+[m[32m                }),[m
[32m+[m[32m              },[m
[32m+[m[32m            ]);[m
           } catch (error) {[m
             console.error('Logout error:', error);[m
[32m+[m[32m            Alert.alert('Error', 'Failed to logout. Please try again.');[m
           }[m
         },[m
       },[m
[36m@@ -331,7 +343,7 @@[m [mexport default function ProfileScreen({ navigation }) {[m
 [m
   const userLevel = calculateUserLevel();[m
 [m
[31m-  if (loading) {[m
[32m+[m[32m  if (loading && isAuthenticated) {[m
     return ([m
       <View style={styles.loadingContainer}>[m
         <ActivityIndicator size="large" color="#B71C1C" />[m
[36m@@ -349,18 +361,26 @@[m [mexport default function ProfileScreen({ navigation }) {[m
         </TouchableOpacity>[m
         <Text style={styles.title}>Profile</Text>[m
         <View style={styles.headerButtons}>[m
[31m-          <TouchableOpacity[m
[31m-            style={styles.refreshButton}[m
[31m-            onPress={loadUserData}[m
[31m-            disabled={loading}[m
[31m-          >[m
[31m-            <Text style={styles.refreshButtonText}>[m
[31m-              {loading ? '‚è≥' : 'üîÑ'}[m
[31m-            </Text>[m
[31m-          </TouchableOpacity>[m
[31m-          <TouchableOpacity onPress={handleLogout}>[m
[31m-            <Text style={styles.logoutText}>Logout</Text>[m
[31m-          </TouchableOpacity>[m
[32m+[m[32m          {isAuthenticated && ([m
[32m+[m[32m            <TouchableOpacity[m
[32m+[m[32m              style={styles.refreshButton}[m
[32m+[m[32m              onPress={loadUserData}[m
[32m+[m[32m              disabled={loading}[m
[32m+[m[32m            >[m
[32m+[m[32m              <Text style={styles.refreshButtonText}>[m
[32m+[m[32m                {loading ? '‚è≥' : 'üîÑ'}[m
[32m+[m[32m              </Text>[m
[32m+[m[32m            </TouchableOpacity>[m
[32m+[m[32m          )}[m
[32m+[m[32m          {isAuthenticated ? ([m
[32m+[m[32m            <TouchableOpacity onPress={handleLogout}>[m
[32m+[m[32m              <Text style={styles.logoutText}>Logout</Text>[m
[32m+[m[32m            </TouchableOpacity>[m
[32m+[m[32m          ) : ([m
[32m+[m[32m            <TouchableOpacity onPress={() => navigation.navigate('Login')}>[m
[32m+[m[32m              <Text style={styles.loginText}>Login</Text>[m
[32m+[m[32m            </TouchableOpacity>[m
[32m+[m[32m          )}[m
         </View>[m
       </View>[m
 [m
[36m@@ -371,28 +391,46 @@[m [mexport default function ProfileScreen({ navigation }) {[m
         }[m
       >[m
         {/* User Status Section */}[m
[31m-        <View style={styles.userStatusSection}>[m
[31m-          <View style={styles.userAvatar}>[m
[31m-            <Text style={styles.userInitial}>[m
[31m-              {userData?.firstName?.charAt(0) || 'U'}[m
[31m-            </Text>[m
[32m+[m[32m        {isAuthenticated ? ([m
[32m+[m[32m          <View style={styles.userStatusSection}>[m
[32m+[m[32m            <View style={styles.userAvatar}>[m
[32m+[m[32m              <Text style={styles.userInitial}>[m
[32m+[m[32m                {userData?.firstName?.charAt(0) || 'U'}[m
[32m+[m[32m              </Text>[m
[32m+[m[32m            </View>[m
[32m+[m[32m            <View style={styles.userInfo}>[m
[32m+[m[32m              <Text style={styles.userStatus}>[m
[32m+[m[32m                {userData?.isProfileCompleted ? 'Registered' : 'Not registered'}[m
[32m+[m[32m              </Text>[m
[32m+[m[32m              <Text style={styles.userPhone}>[m
[32m+[m[32m                {userData?.phoneNumber || 'No phone number'}[m
[32m+[m[32m              </Text>[m
[32m+[m[32m              <Text style={styles.userLevel}>[m
[32m+[m[32m                Level {userLevel.level} ‚Ä¢ {uploadedCoupons.length} coupons[m
[32m+[m[32m                uploaded[m
[32m+[m[32m              </Text>[m
[32m+[m[32m            </View>[m
           </View>[m
[31m-          <View style={styles.userInfo}>[m
[31m-            <Text style={styles.userStatus}>[m
[31m-              {userData?.isProfileCompleted ? 'Registered' : 'Not registered'}[m
[31m-            </Text>[m
[31m-            <Text style={styles.userPhone}>[m
[31m-              {userData?.phoneNumber || 'No phone number'}[m
[31m-            </Text>[m
[31m-            <Text style={styles.userLevel}>[m
[31m-              Level {userLevel.level} ‚Ä¢ {uploadedCoupons.length} coupons[m
[31m-              uploaded[m
[31m-            </Text>[m
[32m+[m[32m        ) : ([m
[32m+[m[32m          <View style={styles.userStatusSection}>[m
[32m+[m[32m            <View style={styles.userAvatar}>[m
[32m+[m[32m              <Text style={styles.userInitial}>üë§</Text>[m
[32m+[m[32m            </View>[m
[32m+[m[32m            <View style={styles.userInfo}>[m
[32m+[m[32m              <Text style={styles.userStatus}>Not Logged In</Text>[m
[32m+[m[32m              <Text style={styles.userPhone}>[m
[32m+[m[32m                Please login to access your profile[m
[32m+[m[32m              </Text>[m
[32m+[m[32m              <Text style={styles.userLevel}>[m
[32m+[m[32m                Login to uplo